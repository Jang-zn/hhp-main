[mysqld]
# 부하테스트 최적화 설정

# 연결 관련 설정
max_connections = 500
max_connect_errors = 100000
max_user_connections = 450
wait_timeout = 28800
interactive_timeout = 28800

# InnoDB 버퍼 풀 (사용 가능 메모리의 70-80%)
innodb_buffer_pool_size = 512M
innodb_buffer_pool_instances = 4

# InnoDB 로그 설정 (성능 최적화)
innodb_log_file_size = 128M
innodb_log_files_in_group = 2
innodb_log_buffer_size = 32M
innodb_flush_log_at_trx_commit = 2  # 부하테스트용: 성능 우선
innodb_flush_method = O_DIRECT

# 쿼리 캐시 설정 (MySQL 8.0에서 제거됨)
# MySQL 8.0부터 query cache는 제거되었으므로 대신 InnoDB 버퍼 풀 최적화

# 테이블 캐시
table_open_cache = 4000
table_definition_cache = 2000

# 정렬 및 임시 테이블
sort_buffer_size = 4M
read_buffer_size = 2M
read_rnd_buffer_size = 8M
join_buffer_size = 4M
tmp_table_size = 64M
max_heap_table_size = 64M

# 스레드 관련 설정
thread_cache_size = 100
thread_stack = 256K

# 바이너리 로그 비활성화 (부하테스트용)
skip-log-bin

# 슬로우 쿼리 로그 (성능 분석용)
slow_query_log = 1
slow_query_log_file = /var/lib/mysql/slow.log
long_query_time = 1

# 일반 쿼리 로그 (디버깅용, 부하테스트 시 비활성화 권장)
# general_log = 0

# MyISAM 설정 (InnoDB 위주이지만 시스템 테이블용)
key_buffer_size = 32M
myisam_sort_buffer_size = 8M

# 네트워크 설정
max_allowed_packet = 64M
net_buffer_length = 32K

# 문자셋 설정
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

[mysql]
default-character-set = utf8mb4

[client]
default-character-set = utf8mb4